<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!-- <meta name="viewport" content="width=device-width,maximum-scale=2"> -->
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="https://code.jquery.com/ui/1.12.1/themes/cupertino/jquery-ui.min.css" rel="stylesheet" type="text/css"
		media="all" />
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"
		type="text/css" media="all" />
	<link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet"
		type="text/css" media="all" />
	<link rel="stylesheet" href="./css/pedigreejs.css" />

	<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/d3@5.16.0/dist/d3.min.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

	<!-- <script src="./scripts/pedigreejs.js"></script> -->
	<!-- <script type="module" src="./es/pedigree.js"></script> -->
	<script type="module">

		import * as pedigree from './es/pedigree.js';
		import * as pedigree_utils from './es/pedigree_utils.js';
		import * as pedigree_form from './es/pedigree_form.js';
		import * as pedcache from './es/pedcache.js';
		import * as io from './es/io.js';
		import * as canrisk_file from './es/canrisk_file.js';


		// if(isIE()) {
		// 	document.write('<script src="https://cdn.jsdelivr.net/npm/canvg@2.0.0/dist/browser/canvg.min.js"><\/script>');
		// }

		var DEFAULT_DISEASES = [
			{ 'type': 'breast_cancer', 'color': '#F68F35' },
			{ 'type': 'ovarian_cancer', 'color': '#4DAA4D' },
			{ 'type': 'pancreatic_cancer', 'color': '#4289BA' },
			{ 'type': 'prostate_cancer', 'color': '#D5494A' }
		];

		$(document).ready(function () {
			var dataset = [
				{ "name": "paternalgf", "sex": "M", "top_level": true },
				{ "name": "paternalgm", "sex": "F", "top_level": true },
				{ "name": "maternalgf", "sex": "M", "top_level": true },
				{ "name": "maternalgm", "sex": "F", "top_level": true },
				{ "name": "father", "display_name": "", "sex": "M", "mother": "paternalgm", "father": "paternalgf" },
				{ "name": "mother", "display_name": "", "sex": "F", "mother": "maternalgm", "father": "maternalgf" },
				{ "name": "ch1", "display_name": "", "sex": "F", "mother": "mother", "father": "father", "proband": true }
			];
			// $( "#pedigrees" ).append( $( "<div id='pedigree_history'></div>" ) );
			// $( "#pedigrees" ).append( $( "<div id='pedigree'></div>" ) );

			var opts = {
				'targetDiv': 'pedigree',
				'btn_target': 'pedigree_history',
				//	'nodeclick': pedigree_form.nodeclick,
				'width': ($(window).width() > 450 ? 1000 : $(window).width() - 30),
				'height': 480,
				'symbol_size': 30,
				'edit': true,
				'zoomSrc': ['button', 'wheel'],
				'zoomIn': .05,
				'zoomOut': 1.5,
				'optionalLabels': [
					['brca1_gene_test', 'brca2_gene_test', 'palb2_gene_test', 'chek2_gene_test', 'atm_gene_test'],
					['rad51d_gene_test', 'rad51c_gene_test', 'brip1_gene_test'],
					['er_bc_pathology', 'pr_bc_pathology', 'her2_bc_pathology', 'ck14_bc_pathology', 'ck56_bc_pathology']
				],
				'labels': [
					['age', 'yob'],
					['brca1_gene_test', 'brca2_gene_test', 'palb2_gene_test', 'chek2_gene_test', 'atm_gene_test'],
					['rad51d_gene_test', 'rad51c_gene_test', 'brip1_gene_test'],
					['er_bc_pathology', 'pr_bc_pathology', 'her2_bc_pathology', 'ck14_bc_pathology', 'ck56_bc_pathology']
				],
				'DEBUG': (pedigree_utils.urlParam('debug') === null ? false : true)
			};

			var local_dataset = pedcache.current(opts);
			if (local_dataset !== undefined && local_dataset !== null) {
				opts.dataset = local_dataset;
			} else {
				opts.dataset = dataset;
			}
			opts = pedigree.build(opts);

			// edit disease configuration
			$('#fh_edit_settings').on("click", function () {
				$('#fh_settings').dialog({
					autoOpen: false,
					title: "Disease Configuration",
					buttons: [
						{
							text: "RESET",
							click: function () {
								$("#reset_dialog").dialog({
									modal: true,
									buttons: {
										Yes: function () {
											newdataset = pedigreejs.pedigree_utils.copy_dataset(pedigreejs.pedcache.current(opts));
											opts.dataset = newdataset;
											opts.diseases = $.extend(true, [], DEFAULT_DISEASES);
											ptree.rebuild(opts);
											update_diseases();
											localStorage.setItem('diseases', JSON.stringify(opts.diseases));
											$(this).dialog("close");
										},
										No: function () {
											$(this).dialog("close");
										}
									}
								});
							}
						},
						{
							text: "OK",
							click: function () {
								$(this).dialog("close");
								newdataset = pedigreejs.pedigree_utils.copy_dataset(pedigreejs.pedcache.current(opts));
								opts.dataset = newdataset;
								pedigreejs.pedigreejs.rebuild(opts);
							}
						}
					],
					width: ($(window).width() > 400 ? 450 : $(window).width() - 30)
				});
				var html_dis =
					'<br><div class="row">' +
					'<div class="col-md-4 text-right">' +
					'<label for="dis_name">Add Disease:</label>' +
					'</div>' +
					'<div class="col-md-6">' +
					'<input type="text" class="form-control" id="dis_name">' +
					'</div>' +
					'<div class="col-md-2">' +
					'<label class="btn btn-default btn-file">' +
					'<input id="add_disease" type="button" style="display: none;"/><i class="fa fa-plus" aria-hidden="true"></i>' +
					'</label>' +
					'</div>' +
					'</div><br><div id="disease_table"></div>';

				function validTextcolor(stringToTest) {
					//Alter the following conditions according to your need.
					if (stringToTest === "") { return false; }
					if (stringToTest === "inherit") { return false; }
					if (stringToTest === "transparent") { return false; }

					var image = document.createElement("img");
					image.style.color = "rgb(0, 0, 0)";
					image.style.color = stringToTest;
					if (image.style.color !== "rgb(0, 0, 0)") { return true; }
					image.style.color = "rgb(255, 255, 255)";
					image.style.color = stringToTest;
					var isValid = image.style.color !== "rgb(255, 255, 255)";
					image.remove();
					return isValid;
				}

				function update_diseases() {
					var tab = "<table class='table table-condensed table-striped table-bordered'>" +
						"<thead><tr><th>Cancer</th><th>color</th><th></th></tr></thead>";
					$.each(opts.diseases, function (k, v) {
						var disease_color = '&thinsp;<span style="padding-left:5px;background:' + opts.diseases[k].color + '"></span>';
						tab += "<tr>" +
							"<td style='text-align:right'>" + v.type + disease_color + "&nbsp;</td>" +
							"<td>" +
							"<input type='text' class='form-control' id='disease_color-" + v.type + "' value='" + opts.diseases[k].color + "'>" +
							"</td>" +
							"<td>" +
							"<label class='btn btn-default btn-sm'>" +
							"<input id='delete_disease-" + v.type + "' type='button' style='display: none;'/>" +
							"<i class='fa fa-times' aria-hidden='true' style='color:#8B0000'></i>" +
							"</label>" +
							"</td>" +
							"</tr>";
					});
					tab += "</table>";
					$('#disease_table').html(tab);

					$("input[id^='delete_disease-']").on("click", function () {
						var this_disease = $(this).attr('id').replace('delete_disease-', '');
						var new_diseases = $.extend(true, [], opts.diseases);
						new_diseases = new_diseases.filter(function (el) {
							return el.type !== this_disease;
						});
						opts.diseases = new_diseases;
						localStorage.setItem('diseases', JSON.stringify(opts.diseases));
						update_diseases();
					});

					$('input[id^="disease_color-"]').on('keypress mouseleave', function (e) {
						var code = (e.keyCode ? e.keyCode : e.which);
						if (code == 13 || code == 0) {
							var this_disease = $(this).attr('id').replace('disease_color-', '');
							var this_color = $(this).val();
							// test if valid color string or hex
							if (!validTextcolor(this_color) && !/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(this_color)) {
								console.error('Invalid color!', this_color);
								return;
							}
							var new_diseases = $.extend(true, [], opts.diseases);
							$.each(new_diseases, function (index, value) {
								if (value.type == this_disease) {
									value.color = this_color;
								}
							});
							opts.diseases = new_diseases;
							localStorage.setItem('diseases', JSON.stringify(opts.diseases));
							update_diseases();
						}
					});
				}

				$('#fh_settings').html(html_dis);
				update_diseases();
				$('#fh_settings').dialog('open');

				$('#add_disease').on("click", function () {
					if ($('#dis_name').val() == "")
						return;
					var new_diseases = $.extend(true, [], opts.diseases);
					new_diseases.push({ 'type': $('#dis_name').val().replace(/\s/g, "_"), 'color': 'purple' });
					opts.diseases = new_diseases;
					localStorage.setItem('diseases', JSON.stringify(opts.diseases));
					update_diseases();
				});
			});
		});

	</script>
</head>

<body>
	<br>
	<div class="text-center">
		<h3>Pedigree</h3>
		<h5>Genetic Cancer Risk Assessment</h5>
		<label class="btn btn-default btn-file">
			<input id="load" type="file" style="display: none;" />Load
		</label>
		<label class="btn btn-default btn-file">
			<input id="save" type="button" style="display: none;" />Save
		</label>
		<label class="btn btn-default btn-file">
			<input id="print" type="button" style="display: none;" />Print
		</label>
		<label class="btn btn-default btn-file">
			<input id="svg_download" type="button" style="display: none;" />SVG
		</label>
		<label class="btn btn-default btn-file">
			<input id="png_download" type="button" style="display: none;" />PNG
		</label>
		<label class="btn btn-default btn-file">
			<input id="fh_edit_settings" type="button" style="display: none;" /><i class="fa fa-cog"
				aria-hidden="true"></i>
		</label>
		<div id="pedigree_history"></div>
		<div id="pedigree"></div>
		<div id="node_properties"></div>
		<div id="fh_settings"></div>
		<div id="person_details" class="col-sm-4 col-xs-12 tabs-smaller">
			<form action="post" novalidate="novalidate">
				<fieldset>
					<div class="panel panel-primary">
						<div class="panel-heading"><strong class="panel-title">Individual's Details</strong></div>
						<div class="panel-body ptop5 pright0 pbottom5 pleft0">
							<div class="fieldWrapper"><input type="hidden" name="name" id="id_name" value="ch1"></div>
							<div class="row">
								<div class="col-xs-5 text-right field_label"><label for="id_display_name">Name:</label>
								</div>
								<div class="field col-xs-7"><input type="text" name="display_name" size="17"
										class="form-control valid" maxlength="60" id="id_display_name"
										aria-invalid="false"></div>
							</div>
							<div class="row">
								<div class="col-xs-5 text-right field_label"><label for="id_sex_0"></label></div>
								<div class="field col-xs-7">
									<ul id="id_sex">
										<li><label for="id_sex_0"><input type="radio" name="sex" value="M" required=""
													id="id_sex_0" class="valid">
												Male</label></li>
										<li><label for="id_sex_1"><input type="radio" name="sex" value="F" required=""
													id="id_sex_1" class="valid">
												Female</label></li>
									</ul>
								</div>
							</div>
							<div class="row">
								<div class="col-xs-5 text-right field_label"><label for="id_status_0"></label></div>
								<div class="field col-xs-7">
									<ul id="id_status">
										<li><label for="id_status_0"><input type="radio" name="status" value="0"
													required="" id="id_status_0" checked="" class="valid">
												Alive</label></li>
										<li><label for="id_status_1"><input type="radio" name="status" value="1"
													required="" id="id_status_1" class="valid">
												Deceased</label></li>
									</ul>
								</div>
							</div>
							<div class="row">
								<div class="col-xs-5 text-right field_label"><label for="id_age"><span
											id="id_age_0">Age:</span><span id="id_age_1" class="hidden">Age at
											death:</span></label><span id="age_yob_lock" class="fa fa-lg fa-lock"
										aria-hidden="true"
										title="Age and year of birth are synchronised for individuals marked as 'Alive'. Click this symbol to unlock/lock these fields. For 'Deceased' individuals these fields are independent."></span>
								</div>
								<div class="field col-xs-7"><input type="number" name="age"
										class="form-control invalid fa" min="0" max="125" id="id_age"
										aria-describedby="id_age-error" aria-invalid="true"><strong id="id_age-error"
										class="invalid fa">&thinsp;</strong></div>
							</div>
							<div class="row">
								<div class="col-xs-5 text-right field_label"><label for="id_yob_0">Year of
										birth:</label></div>
								<div class="field col-xs-7"><select name="yob_0" class="form-control invalid fa"
										id="id_yob_0" aria-describedby="id_yob_0-error" aria-invalid="true">
										<option value="1850">1850</option>
										<option value="1851">1851</option>
										<option value="1852">1852</option>
										<option value="1853">1853</option>
										<option value="1854">1854</option>
										<option value="1855">1855</option>
										<option value="1856">1856</option>
										<option value="1857">1857</option>
										<option value="1858">1858</option>
										<option value="1859">1859</option>
										<option value="1860">1860</option>
										<option value="1861">1861</option>
										<option value="1862">1862</option>
										<option value="1863">1863</option>
										<option value="1864">1864</option>
										<option value="1865">1865</option>
										<option value="1866">1866</option>
										<option value="1867">1867</option>
										<option value="1868">1868</option>
										<option value="1869">1869</option>
										<option value="1870">1870</option>
										<option value="1871">1871</option>
										<option value="1872">1872</option>
										<option value="1873">1873</option>
										<option value="1874">1874</option>
										<option value="1875">1875</option>
										<option value="1876">1876</option>
										<option value="1877">1877</option>
										<option value="1878">1878</option>
										<option value="1879">1879</option>
										<option value="1880">1880</option>
										<option value="1881">1881</option>
										<option value="1882">1882</option>
										<option value="1883">1883</option>
										<option value="1884">1884</option>
										<option value="1885">1885</option>
										<option value="1886">1886</option>
										<option value="1887">1887</option>
										<option value="1888">1888</option>
										<option value="1889">1889</option>
										<option value="1890">1890</option>
										<option value="1891">1891</option>
										<option value="1892">1892</option>
										<option value="1893">1893</option>
										<option value="1894">1894</option>
										<option value="1895">1895</option>
										<option value="1896">1896</option>
										<option value="1897">1897</option>
										<option value="1898">1898</option>
										<option value="1899">1899</option>
										<option value="1900">1900</option>
										<option value="1901">1901</option>
										<option value="1902">1902</option>
										<option value="1903">1903</option>
										<option value="1904">1904</option>
										<option value="1905">1905</option>
										<option value="1906">1906</option>
										<option value="1907">1907</option>
										<option value="1908">1908</option>
										<option value="1909">1909</option>
										<option value="1910">1910</option>
										<option value="1911">1911</option>
										<option value="1912">1912</option>
										<option value="1913">1913</option>
										<option value="1914">1914</option>
										<option value="1915">1915</option>
										<option value="1916">1916</option>
										<option value="1917">1917</option>
										<option value="1918">1918</option>
										<option value="1919">1919</option>
										<option value="1920">1920</option>
										<option value="1921">1921</option>
										<option value="1922">1922</option>
										<option value="1923">1923</option>
										<option value="1924">1924</option>
										<option value="1925">1925</option>
										<option value="1926">1926</option>
										<option value="1927">1927</option>
										<option value="1928">1928</option>
										<option value="1929">1929</option>
										<option value="1930">1930</option>
										<option value="1931">1931</option>
										<option value="1932">1932</option>
										<option value="1933">1933</option>
										<option value="1934">1934</option>
										<option value="1935">1935</option>
										<option value="1936">1936</option>
										<option value="1937">1937</option>
										<option value="1938">1938</option>
										<option value="1939">1939</option>
										<option value="1940">1940</option>
										<option value="1941">1941</option>
										<option value="1942">1942</option>
										<option value="1943">1943</option>
										<option value="1944">1944</option>
										<option value="1945">1945</option>
										<option value="1946">1946</option>
										<option value="1947">1947</option>
										<option value="1948">1948</option>
										<option value="1949">1949</option>
										<option value="1950">1950</option>
										<option value="1951">1951</option>
										<option value="1952">1952</option>
										<option value="1953">1953</option>
										<option value="1954">1954</option>
										<option value="1955">1955</option>
										<option value="1956">1956</option>
										<option value="1957">1957</option>
										<option value="1958">1958</option>
										<option value="1959">1959</option>
										<option value="1960">1960</option>
										<option value="1961">1961</option>
										<option value="1962">1962</option>
										<option value="1963">1963</option>
										<option value="1964">1964</option>
										<option value="1965">1965</option>
										<option value="1966">1966</option>
										<option value="1967">1967</option>
										<option value="1968">1968</option>
										<option value="1969">1969</option>
										<option value="1970">1970</option>
										<option value="1971">1971</option>
										<option value="1972">1972</option>
										<option value="1973">1973</option>
										<option value="1974">1974</option>
										<option value="1975">1975</option>
										<option value="1976">1976</option>
										<option value="1977">1977</option>
										<option value="1978">1978</option>
										<option value="1979">1979</option>
										<option value="1980">1980</option>
										<option value="1981">1981</option>
										<option value="1982">1982</option>
										<option value="1983">1983</option>
										<option value="1984">1984</option>
										<option value="1985">1985</option>
										<option value="1986">1986</option>
										<option value="1987">1987</option>
										<option value="1988">1988</option>
										<option value="1989">1989</option>
										<option value="1990">1990</option>
										<option value="1991">1991</option>
										<option value="1992">1992</option>
										<option value="1993">1993</option>
										<option value="1994">1994</option>
										<option value="1995">1995</option>
										<option value="1996">1996</option>
										<option value="1997">1997</option>
										<option value="1998">1998</option>
										<option value="1999">1999</option>
										<option value="2000">2000</option>
										<option value="2001">2001</option>
										<option value="2002">2002</option>
										<option value="2003">2003</option>
										<option value="2004">2004</option>
										<option value="2005">2005</option>
										<option value="2006">2006</option>
										<option value="2007">2007</option>
										<option value="2008">2008</option>
										<option value="2009">2009</option>
										<option value="2010">2010</option>
										<option value="2011">2011</option>
										<option value="2012">2012</option>
										<option value="2013">2013</option>
										<option value="2014">2014</option>
										<option value="2015">2015</option>
										<option value="2016">2016</option>
										<option value="2017">2017</option>
										<option value="2018">2018</option>
										<option value="2019">2019</option>
										<option value="2020">2020</option>
										<option value="2021">2021</option>
										<option value="" selected="">-</option>
									</select><strong id="id_yob_0-error" class="invalid fa">&thinsp;</strong></div>
							</div>
							<div class="row">
								<div title="proband" class="field_label col-md-5 text-md-right"><label
										for="id_proband">Proband:</label><span class="field_checkbox"><input
											type="checkbox" name="proband" id="id_proband" disabled=""></span></div>
								<div title="exclude from calculation" class="field_label col-md-6"><label
										for="id_exclude">Exclude:</label><span class="field_checkbox"><input
											type="checkbox" name="exclude" id="id_exclude"></span></div>
							</div>
							<div id="tabs" class="ui-tabs ui-corner-all ui-widget ui-widget-content">
								<ul role="tablist"
									class="ui-tabs-nav ui-corner-all ui-helper-reset ui-helper-clearfix ui-widget-header">
									<li role="tab" tabindex="0"
										class="ui-tabs-tab ui-corner-top ui-state-default ui-tab ui-tabs-active ui-state-active"
										aria-controls="cancer" aria-labelledby="ui-id-1" aria-selected="true"
										aria-expanded="true"><a href="#cancer" role="presentation" tabindex="-1"
											class="ui-tabs-anchor" id="ui-id-1">Diagnosis Age</a></li>
									<li role="tab" tabindex="-1"
										class="ui-tabs-tab ui-corner-top ui-state-default ui-tab"
										aria-controls="bc_pathology" aria-labelledby="ui-id-2" aria-selected="false"
										aria-expanded="false"><a href="#bc_pathology" role="presentation" tabindex="-1"
											class="ui-tabs-anchor" id="ui-id-2">Pathology</a></li>
									<li role="tab" tabindex="-1"
										class="ui-tabs-tab ui-corner-top ui-state-default ui-tab"
										aria-controls="gene_test" aria-labelledby="ui-id-3" aria-selected="false"
										aria-expanded="false"><a href="#gene_test" role="presentation" tabindex="-1"
											class="ui-tabs-anchor" id="ui-id-3">Gene Tests</a></li>
								</ul><input type="hidden" name="csrfmiddlewaretoken"
									value="cJas5szsOl2YZMjvnQpXrNLmpcXBYqG18179YYIQYSVDOMRMn2pDNGTBbhHJk7G7">
								<div id="cancer" aria-labelledby="ui-id-1" role="tabpanel"
									class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="false"
									style="">
									<div class="row">
										<div title="approximate age of diagnosis"
											class="field_label col-md-6 text-md-right"><label
												for="id_approx">approx:</label><span class="field_checkbox"><input
													type="checkbox" name="approx" id="id_approx"></span></div>
									</div>
									<div class="row">
										<div class="field_label col-md-5 text-md-right"><label
												for="id_breast_cancer_diagnosis_age_0">Breast:&thinsp;<span
													class="pleft5 bg-breast_cancer"></span></label></div>
										<div class="field col-md-6 col-sm-6"><input type="number"
												name="breast_cancer_diagnosis_age_0" min="0" max="125"
												class="form-control valid" id="id_breast_cancer_diagnosis_age_0"><select
												name="breast_cancer_diagnosis_age_1" class="form-control valid"
												id="id_breast_cancer_diagnosis_age_1" style="display: none;">
												<option value="" selected="">-</option>
												<option value="5">&lt;10</option>
												<option value="15">10-20</option>
												<option value="25">20-30</option>
												<option value="35">30-40</option>
												<option value="45">40-50</option>
												<option value="55">50-60</option>
												<option value="65">60-70</option>
												<option value="75">70-80</option>
												<option value="85">&gt;80</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-md-5 text-md-right"><label
												for="id_breast_cancer2_diagnosis_age_0">Contralateral
												breast:&thinsp;<span class="pleft5 bg-breast_cancer2"></span></label>
										</div>
										<div class="field col-md-6 col-sm-6"><input type="number"
												name="breast_cancer2_diagnosis_age_0" min="0" max="125"
												class="form-control valid"
												id="id_breast_cancer2_diagnosis_age_0"><select
												name="breast_cancer2_diagnosis_age_1" class="form-control valid"
												id="id_breast_cancer2_diagnosis_age_1" style="display: none;">
												<option value="" selected="">-</option>
												<option value="5">&lt;10</option>
												<option value="15">10-20</option>
												<option value="25">20-30</option>
												<option value="35">30-40</option>
												<option value="45">40-50</option>
												<option value="55">50-60</option>
												<option value="65">60-70</option>
												<option value="75">70-80</option>
												<option value="85">&gt;80</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-md-5 text-md-right"><label
												for="id_ovarian_cancer_diagnosis_age_0">Ovarian:&thinsp;<span
													class="pleft5 bg-ovarian_cancer"></span></label></div>
										<div class="field col-md-6 col-sm-6"><input type="number"
												name="ovarian_cancer_diagnosis_age_0" min="0" max="125"
												class="form-control valid"
												id="id_ovarian_cancer_diagnosis_age_0"><select
												name="ovarian_cancer_diagnosis_age_1" class="form-control valid"
												id="id_ovarian_cancer_diagnosis_age_1" style="display: none;">
												<option value="" selected="">-</option>
												<option value="5">&lt;10</option>
												<option value="15">10-20</option>
												<option value="25">20-30</option>
												<option value="35">30-40</option>
												<option value="45">40-50</option>
												<option value="55">50-60</option>
												<option value="65">60-70</option>
												<option value="75">70-80</option>
												<option value="85">&gt;80</option>
											</select></div>
									</div>
									<div class="row" style="display: none;">
										<div class="field_label col-md-5 text-md-right"><label
												for="id_prostate_cancer_diagnosis_age_0">Prostate:&thinsp;<span
													class="pleft5 bg-prostate_cancer"></span></label></div>
										<div class="field col-md-6 col-sm-6"><input type="number"
												name="prostate_cancer_diagnosis_age_0" min="0" max="125"
												class="form-control valid"
												id="id_prostate_cancer_diagnosis_age_0"><select
												name="prostate_cancer_diagnosis_age_1" class="form-control valid"
												id="id_prostate_cancer_diagnosis_age_1" style="display: none;">
												<option value="" selected="">-</option>
												<option value="5">&lt;10</option>
												<option value="15">10-20</option>
												<option value="25">20-30</option>
												<option value="35">30-40</option>
												<option value="45">40-50</option>
												<option value="55">50-60</option>
												<option value="65">60-70</option>
												<option value="75">70-80</option>
												<option value="85">&gt;80</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-md-5 text-md-right"><label
												for="id_pancreatic_cancer_diagnosis_age_0">Pancreatic:&thinsp;<span
													class="pleft5 bg-pancreatic_cancer"></span></label></div>
										<div class="field col-md-6 col-sm-6"><input type="number"
												name="pancreatic_cancer_diagnosis_age_0" min="0" max="125"
												class="form-control valid"
												id="id_pancreatic_cancer_diagnosis_age_0"><select
												name="pancreatic_cancer_diagnosis_age_1" class="form-control valid"
												id="id_pancreatic_cancer_diagnosis_age_1" style="display: none;">
												<option value="" selected="">-</option>
												<option value="5">&lt;10</option>
												<option value="15">10-20</option>
												<option value="25">20-30</option>
												<option value="35">30-40</option>
												<option value="45">40-50</option>
												<option value="55">50-60</option>
												<option value="65">60-70</option>
												<option value="75">70-80</option>
												<option value="85">&gt;80</option>
											</select></div>
									</div>
								</div>
								<div id="bc_pathology" aria-labelledby="ui-id-2" role="tabpanel"
									class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true"
									style="display: none;">
									<div class="row">
										<div class="field_label col-md-8 text-md-right"><label
												for="id_er_bc_pathology">Oestrogen Receptor:</label></div>
										<div class="field col-md-4"><select name="er_bc_pathology"
												class="form-control valid" id="id_er_bc_pathology" disabled=""
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">positive</option>
												<option value="N">negative</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-md-8 text-md-right"><label
												for="id_pr_bc_pathology">Progesterone Receptor:</label></div>
										<div class="field col-md-4"><select name="pr_bc_pathology"
												class="form-control valid" id="id_pr_bc_pathology" disabled=""
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">positive</option>
												<option value="N">negative</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-md-8 text-md-right"><label
												for="id_her2_bc_pathology">HER2:</label></div>
										<div class="field col-md-4"><select name="her2_bc_pathology"
												class="form-control valid" id="id_her2_bc_pathology" disabled=""
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">positive</option>
												<option value="N">negative</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-md-8 text-md-right"><label
												for="id_ck14_bc_pathology">Cytokeratin 14:</label></div>
										<div class="field col-md-4"><select name="ck14_bc_pathology"
												class="form-control valid" id="id_ck14_bc_pathology" disabled=""
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">positive</option>
												<option value="N">negative</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-md-8 text-md-right"><label
												for="id_ck56_bc_pathology">Cytokeratin 5/6:</label></div>
										<div class="field col-md-4"><select name="ck56_bc_pathology"
												class="form-control valid" id="id_ck56_bc_pathology" disabled=""
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">positive</option>
												<option value="N">negative</option>
											</select></div>
									</div>
								</div>
								<div id="gene_test" aria-labelledby="ui-id-3" role="tabpanel"
									class="ui-tabs-panel ui-corner-bottom ui-widget-content" aria-hidden="true"
									style="display: none;">
									<div class="row bottom5">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="select_all_gene_tests">Set all tests:</label></div>
										<div class="field col-lg-6"><select class="form-control"
												id="select_all_gene_tests">
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
												<option value="N">Absent</option>
												<option value="reset">Reset</option>
											</select></div>
									</div>
									<div class="row hidden-md">
										<div class="col-lg-4"></div>
										<div class="col-lg-4"><a
												href="https://canrisk.atlassian.net/wiki/spaces/FAQS/pages/30703617/What+is+the+difference+between+a+mutation+search+and+a+direct+gene+test"
												title="FAQ" target="_blank">Test Type</a></div>
										<div class="col-lg-4">Result</div>
									</div>
									<div class="row">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="id_brca1_gene_test">BRCA1 test :</label></div>
										<div class="field col-lg-4"><select name="brca1_gene_test"
												class="form-control valid" id="id_brca1_gene_test" aria-invalid="false">
												<option value="-">-</option>
												<option value="0">Untested</option>
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
											</select></div>
										<div class="field col-lg-4"><select name="brca1_gene_test_result"
												class="form-control valid" id="id_brca1_gene_test_result"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">Mut-present</option>
												<option value="N">Mut-absent</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="id_brca2_gene_test">BRCA2 test :</label></div>
										<div class="field col-lg-4"><select name="brca2_gene_test"
												class="form-control valid" id="id_brca2_gene_test" aria-invalid="false">
												<option value="-">-</option>
												<option value="0">Untested</option>
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
											</select></div>
										<div class="field col-lg-4"><select name="brca2_gene_test_result"
												class="form-control valid" id="id_brca2_gene_test_result"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">Mut-present</option>
												<option value="N">Mut-absent</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="id_palb2_gene_test">PALB2 test :</label></div>
										<div class="field col-lg-4"><select name="palb2_gene_test"
												class="form-control valid" id="id_palb2_gene_test" aria-invalid="false">
												<option value="-">-</option>
												<option value="0">Untested</option>
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
											</select></div>
										<div class="field col-lg-4"><select name="palb2_gene_test_result"
												class="form-control valid" id="id_palb2_gene_test_result"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">Mut-present</option>
												<option value="N">Mut-absent</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="id_chek2_gene_test">CHEK2 test :</label></div>
										<div class="field col-lg-4"><select name="chek2_gene_test"
												class="form-control valid" id="id_chek2_gene_test" aria-invalid="false">
												<option value="-">-</option>
												<option value="0">Untested</option>
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
											</select></div>
										<div class="field col-lg-4"><select name="chek2_gene_test_result"
												class="form-control valid" id="id_chek2_gene_test_result"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">Mut-present</option>
												<option value="N">Mut-absent</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="id_atm_gene_test">ATM test :</label></div>
										<div class="field col-lg-4"><select name="atm_gene_test"
												class="form-control valid" id="id_atm_gene_test" aria-invalid="false">
												<option value="-">-</option>
												<option value="0">Untested</option>
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
											</select></div>
										<div class="field col-lg-4"><select name="atm_gene_test_result"
												class="form-control valid" id="id_atm_gene_test_result"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">Mut-present</option>
												<option value="N">Mut-absent</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="id_rad51d_gene_test">RAD51D test :</label></div>
										<div class="field col-lg-4"><select name="rad51d_gene_test"
												class="form-control valid" id="id_rad51d_gene_test"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">Untested</option>
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
											</select></div>
										<div class="field col-lg-4"><select name="rad51d_gene_test_result"
												class="form-control valid" id="id_rad51d_gene_test_result"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">Mut-present</option>
												<option value="N">Mut-absent</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="id_rad51c_gene_test">RAD51C test :</label></div>
										<div class="field col-lg-4"><select name="rad51c_gene_test"
												class="form-control valid" id="id_rad51c_gene_test"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">Untested</option>
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
											</select></div>
										<div class="field col-lg-4"><select name="rad51c_gene_test_result"
												class="form-control valid" id="id_rad51c_gene_test_result"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">Mut-present</option>
												<option value="N">Mut-absent</option>
											</select></div>
									</div>
									<div class="row">
										<div class="field_label col-lg-4 text-lg-right"><label
												for="id_brip1_gene_test">BRIP1 test :</label></div>
										<div class="field col-lg-4"><select name="brip1_gene_test"
												class="form-control valid" id="id_brip1_gene_test" aria-invalid="false">
												<option value="-">-</option>
												<option value="0">Untested</option>
												<option value="S">Mutation search</option>
												<option value="T">Direct gene test</option>
											</select></div>
										<div class="field col-lg-4"><select name="brip1_gene_test_result"
												class="form-control valid" id="id_brip1_gene_test_result"
												aria-invalid="false">
												<option value="-">-</option>
												<option value="0">unknown</option>
												<option value="P">Mut-present</option>
												<option value="N">Mut-absent</option>
											</select></div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</fieldset>
			</form>
		</div>
		<div id="reset_dialog" title="Confirmation Disease Reset"></div>
	</div>
	<div class="container">
		<h3>Building Pedigrees</h3>
		<p>
			Basic use:
			<li>'undo' <i class="fa fa-undo" aria-hidden="true"></i></li>
			<li>'redo' <i class="fa fa-repeat" aria-hidden="true"></i></li>
			<li>'reset' <i class="fa fa-refresh" aria-hidden="true"></i></li>
			<li>full screen editing <i class="fa fa-arrows-alt" aria-hidden="true"></i></li>
		</p>
		<p>
			Individuals can be added to the pedigree by placing the mouse over an individual to reveal
			the editing widgets:
			<li>partner <i class="fa fa-link" aria-hidden="true"></i> (two people with at least one child)</li>
			<li>parents <i class="fa fa-arrow-up" aria-hidden="true"></i></li>
			<li>sibling <i class="fa fa-user-plus" aria-hidden="true"></i></li>
			<li>child <i class="fa fa-arrow-down" aria-hidden="true"></i></li>
		</p>
		<p>
			Options are given to add:
			<li>male <i class="fa fa-square-o" aria-hidden="true"></i></li>
			<li>female <i class="fa fa-circle-o" aria-hidden="true"></i></li>
			<li>unknown <i class="fa fa-square-o fa-rotate-45" aria-hidden="true"></i></li>
			<li>dizygotic (fraternal) twin <i class="fa fa-angle-up" style="font-size:1.5em" aria-hidden="true"></i>
			</li>
			<li>monozygotic (identical) twin <i class="fa fa-caret-up" style="font-size:1.5em" aria-hidden="true"></i>
			</li>
		</p>
		<p>
			The 'edit' <i class="fa fa-cog" aria-hidden="true"></i> button opens the attributes associated for the
			individual.
		</p>
		<p>
			Half siblings can be added by creating a new partner (with <i class="fa fa-link" aria-hidden="true"></i>)
			for the parent in common to the siblings.
		</p>
		<p>
			Consanguineous partners can be created placing the mouse over one of the partners and clicking and dragging
			the
			triple dashed line widget <img alt="handle" src="src/img/handle.png"> in the direction of their new partner.
		</p>


		<h3>Loading and Saving Pedigree Data</h3>
		<p>The pedigree can be saved out and loaded back in. Support is given to loading
			<a href="https://canrisk.atlassian.net/wiki/x/IoCeAg" target="_blank">CanRisk files</a>,
			<a href="https://pluto.srl.cam.ac.uk/bd4/v4/docs/BWA_v4_Appendix_A.pdf" target="_blank">BOADICEA v4
				files</a>,
			and <a href="https://www.cog-genomics.org/plink/1.9/formats#ped" target="_blank">PED files</a>.
		<p>
		<p>
			Adapted from <a href="https://github.com/CCGE-BOADICEA/pedigreejs" , target="_blank">pedigreejs.</a>
			View project and contact on <a href="https://github.com/bbennett80/pedigree" target="_blank">GitHub.</a>
		</p>
		<br>
	</div>
</body>
